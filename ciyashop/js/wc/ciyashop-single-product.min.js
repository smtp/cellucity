jQuery(function(s){function i(t,i){this.$target=t,this.$images=s(".ciyashop-product-gallery__image",t),this.$images_threesixty=s(".product-threesixty-zoom-img",t),0===this.$images.length?this.$target.css("opacity",1):(t.data("product_gallery",this),s(window).width()<768?this.zoom_enabled=!1:this.zoom_enabled=!0,this.photoswipe_enabled=!0,i&&(this.zoom_enabled=!1!==i.zoom_enabled&&this.zoom_enabled,this.photoswipe_enabled=!1!==i.photoswipe_enabled&&this.photoswipe_enabled),this.zoomInit=this.zoomInit.bind(this),this.initPhotoswipe=this.initPhotoswipe.bind(this),this.getGalleryItems=this.getGalleryItems.bind(this),this.openPhotoswipe=this.openPhotoswipe.bind(this),this.onResetSlidePosition=this.onResetSlidePosition.bind(this),this.zoom_enabled&&(this.zoomInit(),t.on("cs_woocommerce_gallery_init_zoom",this.zoomInit)),this.photoswipe_enabled&&(this.initPhotoswipe(),t.on("cs_woocommerce_gallery_reset_slide_position",this.onResetSlidePosition)))}var n={shareEl:!1,closeOnScroll:!1,history:!1,hideAnimationDuration:0,showAnimationDuration:0};i.prototype.zoomInit=function(){if(!ciyashop_wc_single_product_params.zoom_enabled)return!1;var t,e=this.$target.width(),o=!1,i=s(".ciyashop-product-gallery__image");s(i).each(function(t,i){if(s(i).find("img").data("large_image_width")>e)return!(o=!0)}),o&&(t=s.extend({touch:!1},ciyashop_wc_single_product_params.zoom_options),"ontouchstart"in document.documentElement&&(t.on="click"),i.trigger("zoom.destroy"),i.zoom(t),setTimeout(function(){i.find(":hover").length&&i.trigger("mouseover")},100))},i.prototype.initPhotoswipe=function(){0<this.$images.length&&this.$target.on("click",".ciyashop-product-gallery_button-link-zoom",this.openPhotoswipe),0<this.$images_threesixty.length&&this.$target.on("click",".ciyashop-product-threesixty_button-link-zoom",this.openPhotoswipe),this.$target.on("click",".ciyashop-product-gallery__image a",this.openPhotoswipe)},i.prototype.onResetSlidePosition=function(){s(".ciyashop-product-gallery__wrapper").hasClass("slick-initialized")&&s(".ciyashop-product-gallery__wrapper").slick("slickGoTo",0)},i.prototype.getGalleryItems=function(){var t=this.$images,e=[];return 0<t.length&&t.each(function(t,i){i=s(i).find("img"),i={src:i.attr("data-large_image"),w:i.attr("data-large_image_width"),h:i.attr("data-large_image_height"),title:i.attr("data-caption")?i.attr("data-caption"):i.attr("title")};e.push(i)}),e},i.prototype.openPhotoswipe=function(t){t.preventDefault();var i=s(".pswp")[0],e=this.getGalleryItems(),t=(s(t.target).is(".ciyashop-product-gallery_button-link-zoom"),this.$target.find(".slick-current")),t=s.extend({index:s(t).index()},n),o=new PhotoSwipe(i,PhotoSwipeUI_Default,e,t);o.init();o.getCurrentIndex();o.listen("afterChange",function(){var t=o.getCurrentIndex();s(".ciyashop-product-gallery__wrapper").hasClass("slick-initialized")&&s(".ciyashop-product-gallery__wrapper").slick("slickGoTo",t)})},s.fn.ciyashop_product_gallery=function(t){return new i(this,t),this},s(".ciyashop-product-gallery").each(function(){s(this).ciyashop_product_gallery()})});